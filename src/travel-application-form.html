<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>易掌通 - 出差申请表</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/icons.css">
    <link rel="stylesheet" href="css/form-enhancements.css">
    <link rel="stylesheet" href="css/wechat-ui.css">
    <!-- 用户认证检查 -->
    <script src="js/auth-check.js"></script>
</head>
<body>
    <!-- 出差申请表单页面 -->
    <div id="travelApplicationFormPage" class="page active">
        <!-- 应用头部 -->
        <div class="app-header">
            <div class="header-left">
                <button class="back-btn" onclick="handleBackButton()">←</button>
                <span class="page-title">出差申请表单</span>
            </div>
        </div>

        <!-- 主内容区域 -->
        <div class="main-content">
            <form id="travelApplicationForm" class="form-container">
                <!-- 单据ID (隐藏) -->
                <div class="form-group" style="display: none;">
                    <label class="form-label">单据ID (TravelID)：</label>
                    <input type="text" class="form-input" id="travelID" placeholder="系统自动生成" readonly>
                </div>

                <!-- 编号 -->
                <div class="form-group">
                    <label class="form-label">编号 (TravelNo)：</label>
                    <input type="text" class="form-input" id="travelNo" placeholder="系统自动生成" readonly>
                </div>

                <!-- 申请人 -->
                <div class="form-group">
                    <label class="form-label required">申请人 (RequestPersonName)：</label>
                    <input type="text" class="form-input" id="requestPersonName" readonly>
                </div>

                <!-- 申请日期 -->
                <div class="wx-form-group">
                    <label class="form-label wx-form-label required">申请日期 (RequestDate)：</label>
                    <div class="wx-date-picker">
                        <input type="date" class="form-input wx-date-picker-input" id="requestDate" required readonly>
                    </div>
                </div>

                <!-- 部门 -->
                <div class="form-group" style="display: none;">
                    <label class="form-label required">组织机构 (OrgCode)：</label>
                    <input type="text" class="form-input" id="deptName" readonly>
                </div>
                
                <!-- 部门ID -->
                <div class="form-group" style="display: none;">
                    <label class="form-label">部门ID (DeptID)：</label>
                    <input type="text" class="form-input" id="deptID" readonly>
                </div>
                
                <!-- 部门名称 -->
                <div class="form-group">
                    <label class="form-label">部门名称 (deptName)：</label>
                    <input type="text" class="form-input" id="displayDeptName" readonly>
                </div>

                <!-- 职位 -->
                <div class="form-group">
                    <label class="form-label required">职位 (Role_ID)：</label>
                    <input type="text" class="form-input" id="roleID" placeholder="请输入职位" required>
                </div>

                <!-- 出行标准 -->
                <div class="wx-form-group">
                    <label class="form-label wx-form-label required">出行标准 (tralLevelName)：</label>
                    <div class="wx-select">
                        <select class="form-select wx-select-value" id="travelLevel" required>
                            <option value="">请选择</option>
                            <option value="1">副总经理(总监)</option>
                            <option value="2">部门负责人</option>
                            <option value="3">其他人员</option>
                        </select>
                        <span class="wx-select-arrow"></span>
                    </div>
                </div>

                <!-- 目的地 -->
                <div class="form-group">
                    <label class="form-label required">目的地 (TravelPlace)：</label>
                    <input type="text" class="form-input" id="travelPlace" placeholder="请输入目的地" required>
                </div>

                <!-- 行程计划路线 -->
                <div class="form-group">
                    <label class="form-label required">行程计划路线 (TripRoute)：</label>
                    <input type="text" class="form-input" id="tripRoute" placeholder="请输入行程路线" required>
                </div>

                <!-- 行程计划起始日 -->
                <div class="wx-form-group">
                    <label class="form-label wx-form-label required">行程计划起始日 (TripPlanDateFrom)(*)：</label>
                    <div class="wx-date-picker">
                        <input type="date" class="form-input wx-date-picker-input" id="tripPlanDateFrom" required>
                    </div>
                </div>

                <!-- 行程计划终止日 -->
                <div class="wx-form-group">
                    <label class="form-label wx-form-label required">行程计划终止日 (TripPlanDateTo)(*)：</label>
                    <div class="wx-date-picker">
                        <input type="date" class="form-input wx-date-picker-input" id="tripPlanDateTo" required>
                    </div>
                </div>

                <!-- 行程计划天数 -->
                <div class="form-group">
                    <label class="form-label">行程计划天数 (TripDays)：</label>
                    <input type="number" class="form-input" id="tripDays" readonly>
                </div>

                <!-- 出差目的 -->
                <div class="form-group">
                    <label class="form-label required">出差目的 (TravelReason)(*)：</label>
                    <textarea class="form-textarea" id="travelReason" placeholder="请输入出差目的" rows="4"></textarea>
                </div>

                <!-- 计划出行方式 -->
                <div class="form-group">
                    <label class="form-label required">计划出行方式 (PlanTravelType)(*)：</label>
                    <select class="form-select" id="planTravelType">
                        <option value="">请选择</option>
                        <option value="飞机">飞机</option>
                        <option value="高铁">高铁</option>
                        <option value="动车">动车</option>
                        <option value="火车">火车</option>
                        <option value="汽车">汽车</option>
                        <option value="其他">其他</option>
                    </select>
                    <span class="select-arrow">▼</span>
                </div>

                <!-- 交通工具标准 -->
                <div class="form-group">
                    <label class="form-label">交通工具标准 (TransportLevel)：</label>
                    <input type="text" class="form-input" id="transportLevel" placeholder="请输入交通工具标准">
                </div>

                <!-- 费用预算 -->
                <div class="form-group">
                    <label class="form-label">费用预算 (CostBudget)：</label>
                    <input type="number" class="form-input" id="costBudget" placeholder="请输入费用预算">
                </div>

                <!-- 预计借款 -->
                <div class="form-group">
                    <label class="form-label">预计借款 (EstimateLoan)：</label>
                    <input type="number" class="form-input" id="estimateLoan" placeholder="请输入预计借款">
                </div>

                <!-- 随行人员 -->
                <div class="form-group">
                    <label class="form-label">随行人员 (PersonTogether)：</label>
                    <textarea class="form-textarea" id="personTogether" placeholder="请输入随行人员信息" rows="2"></textarea>
                </div>

                <!-- 部门意见 (隐藏字段) -->
                <div class="form-group" style="display: none;">
                    <label class="form-label">部门意见 (DutyDeptOpnion)：</label>
                    <textarea class="form-textarea" id="dutyDeptOpnion" placeholder="部门意见" rows="2" readonly></textarea>
                </div>

                <!-- 副经理意见 (隐藏字段) -->
                <div class="form-group" style="display: none;">
                    <label class="form-label">副经理意见 (DeputyManagerOpinion)：</label>
                    <textarea class="form-textarea" id="deputyManagerOpinion" placeholder="副经理意见" rows="2" readonly></textarea>
                </div>

                <!-- 经理意见 (隐藏字段) -->
                <div class="form-group" style="display: none;">
                    <label class="form-label">经理意见 (ManagerOpinion)：</label>
                    <textarea class="form-textarea" id="managerOpinion" placeholder="经理意见" rows="2" readonly></textarea>
                </div>

                <!-- 审核状态 -->
                <div class="form-group">
                    <label class="form-label">审核状态 (AuditStauts)：</label>
                    <input type="text" class="form-input" id="statusName" readonly>
                </div>

                <!-- 创建时间 -->
                <div class="form-group">
                    <label class="form-label">创建时间 (CreateTime)：</label>
                    <input type="text" class="form-input" id="createTime" readonly>
                </div>

                <!-- 操作按钮 -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="handleBackButton()">取消</button>
                    <button type="button" class="btn btn-outline" onclick="saveDraft()">保存草稿</button>
                    <button type="button" class="btn btn-primary" onclick="submitApplication()">提交</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script src="js/api.js"></script>
    <script src="js/travel-application-form.js"></script>
</body>
</html>